<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ETSTORE ‚Äî Universo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0a0a0f; --panel: #101022; --card: #121228; --border: #252547;
      --text: #e5e7eb; --muted: #9ca3af; --primary: #7c3aed; --cyan: #06b6d4;
      --accent: #f59e0b;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Inter, system-ui; background: radial-gradient(1000px 600px at 20% -10%, #171739, var(--bg)); color: var(--text); overflow: hidden; }
    a { color: inherit; text-decoration: none; }

    canvas#bg { position: fixed; inset: 0; z-index: -2; }
    .stars { position: fixed; inset: 0; pointer-events: none; z-index: -1; }
    .star { position: absolute; width: 2px; height: 2px; background: #c084fc; border-radius: 50%; opacity: 0; animation: twinkle 3s infinite ease-in-out; }
    @keyframes twinkle { 0% { opacity: 0; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.5); } }

    header { position: sticky; top: 0; z-index: 50; background: #00000070; backdrop-filter: blur(10px); border-bottom: 1px solid #1f1f33; }
    .topbar { max-width: 1200px; margin: 0 auto; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; }
    .tabs { display: flex; gap: 12px; flex-wrap: wrap; }
    .tab { padding: 8px 12px; border-radius: 10px; color: #cbd5e1; font-weight: 600; border: 1px solid transparent; transition: .2s; }
    .tab:hover { color: #fff; border-color: #2b2b4a; }
    .tab.active { color: #fff; background: linear-gradient(90deg, var(--primary), var(--cyan)); }
    .profile { font-size: 13px; color: var(--muted); display: flex; align-items: center; gap: 10px; }
    .logout { font-size: 12px; color: #fca5a5; cursor: pointer; }

    .hero { position: relative; padding: 80px 20px; text-align: center; background: linear-gradient(180deg, #0a0a0f00, #0a0a0f60); }
    .hero-inner { max-width: 1000px; margin: 0 auto; }
    .hero h1 { font-size: 42px; margin: 0; background: linear-gradient(90deg, #fff, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero p { font-size: 16px; color: #cbd5e1; margin: 12px 0 22px; }
    .hero .actions { display: flex; gap: 12px; justify-content: center; }
    .btn { padding: 10px 14px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; color: #fff; background: linear-gradient(90deg, var(--cyan), var(--primary)); }
    .btn.secondary { background: #334155; color: #cbd5e1; }
    .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; margin-top: 26px; }
    .feature { background: #0f0f26; border: 1px solid #232352; border-radius: 14px; padding: 16px; }
    .feature h3 { margin: 0 0 6px; font-size: 16px; }
    .feature p { margin: 0; font-size: 13px; color: #9ca3af; }

    .container { max-width: 1200px; margin: 20px auto 110px; padding: 0 20px; }
    .section-title { margin: 8px 0 14px; font-size: 22px; font-weight: 800; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; transition: .2s; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px #0008; border-color: #343463; }
    .thumb { width: 100%; height: 150px; object-fit: cover; }
    .content { padding: 12px; }
    .title { font-weight: 700; font-size: 16px; margin-bottom: 6px; }
    .desc { font-size: 13px; color: var(--muted); margin-bottom: 10px; min-height: 36px; }
    .tags { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px; }
    .tag { font-size: 11px; padding: 4px 8px; border-radius: 999px; border: 1px solid #334155; color: #93c5fd; background: #0b1220; }
    .row { display: flex; justify-content: space-between; align-items: center; }
    .price { font-weight: 800; color: #86efac; }

    .dock { position: fixed; bottom: 14px; left: 50%; transform: translateX(-50%); background: #0d0d20cc; backdrop-filter: blur(10px); border: 1px solid #24244a; border-radius: 16px; padding: 6px 8px; z-index: 40; }
    .dock-scroll { display: flex; gap: 8px; overflow-x: auto; max-width: 92vw; scrollbar-width: thin; scrollbar-color: #333 transparent; }
    .dock-scroll::-webkit-scrollbar { height: 6px; }
    .dock-scroll::-webkit-scrollbar-thumb { background: #333; border-radius: 8px; }
    .dock-item { min-width: 52px; height: 52px; border-radius: 12px; border: 1px solid #2b2d3a; background: #151530; display: grid; place-items: center; color: #cbd5e1; cursor: pointer; transition: .2s; font-size: 20px; }
    .dock-item:hover { transform: translateY(-1px); box-shadow: 0 0 12px #7c3aed40; }
    .dock-item.active { outline: 2px solid var(--primary); color: #fff; }

    .coupon { position: fixed; bottom: 100px; right: 20px; background: #170f2b; border: 1px solid #3b1e72; color: #e9d5ff; border-radius: 14px; box-shadow: 0 10px 24px #0008; padding: 14px 16px; display: none; max-width: 300px; z-index: 45; }
    .coupon.show { display: block; animation: bounceIn .8s ease, pulse 2s infinite; }
    .coupon.hide { animation: fadeOut .5s ease forwards; }
    .coupon h4 { margin: 0 0 6px; font-size: 16px; color: #c084fc; }
    .coupon p { margin: 0; font-size: 13px; color: #d4d4d8; }
    .coupon .code { display: inline-block; margin-top: 8px; font-weight: 800; color: #fff; background: var(--primary); padding: 6px 10px; border-radius: 8px; box-shadow: 0 0 8px #7c3aed88; }
    .coupon .close { position: absolute; top: 8px; right: 10px; cursor: pointer; color: #ddd; }

    @keyframes bounceIn { 0% { transform: scale(0.6) translateY(40px); opacity: 0; } 60% { transform: scale(1.06) translateY(-6px); opacity: 1; } 100% { transform: scale(1) translateY(0); } }
    @keyframes pulse { 0% { box-shadow: 0 0 10px #7c3aed; } 50% { box-shadow: 0 0 18px #06b6d4; } 100% { box-shadow: 0 0 10px #7c3aed; } }
    @keyframes fadeOut { to { opacity: 0; transform: translateY(10px) scale(0.98); } }

    .page { display: none; }
    .page.active { display: block; }

    .login-screen { position: fixed; inset: 0; z-index: 100; background: radial-gradient(1000px 600px at 20% -10%, #1b1b3f, #0a0a0f); display: flex; align-items: center; justify-content: center; }
    .login-box { width: 380px; background: #11112a; border: 1px solid #2a2a4d; border-radius: 16px; box-shadow: 0 10px 30px #0007; padding: 20px; text-align: center; }
    .login-box h2 { margin: 0 0 8px; color: #fff; }
    .login-box p { margin: 0 0 14px; color: #cbd5e1; font-size: 14px; }
    .input { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid #2b2b4a; background: #0b0b20; color: #fff; margin-bottom: 12px; }
    .login-actions { display: flex; gap: 10px; }
    .small { font-size: 12px; color: #9ca3af; margin-top: 8px; }

    #chat-log { font-size: 13px; color: #cbd5e1; padding: 8px; background:#0f1020;border:1px solid #2b2d3a;border-radius:12px;height:300px;overflow:auto; }
    #chat-input { flex:1;padding:10px;border-radius:10px;border:1px solid #334155;background:#0b1220;color:#e5e7eb }
    .chat-row { display:flex; gap:8px; margin-top:10px }

    #product-modal { display:none; position:fixed; inset:0; background:#0009; backdrop-filter:blur(6px); z-index:200; align-items:center; justify-content:center; }
    #product-modal .box { background:#11112a; border:1px solid #2a2a4d; border-radius:16px; width:420px; max-width:92vw; padding:20px; color:#fff; position:relative; }
    #modal-close { position:absolute; top:10px; right:14px; cursor:pointer; font-size:18px; }
    #pix-info { display:none; margin-top:12px; background:#0b0b20; padding:10px; border-radius:10px; text-align:center; }
    #pix-info p { margin:6px 0; }
    #pix-info .code { font-weight:bold; color:#7c3aed; }
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <div class="stars" id="stars"></div>

  <div class="login-screen" id="login">
    <div class="login-box">
      <h2>Bem-vindo ao ETSTORE</h2>
      <p>Digite seu nickname para entrar</p>
      <input id="nick-input" class="input" placeholder="Seu nickname" maxlength="20" />
      <div class="login-actions">
        <button id="login-btn" class="btn" style="flex:1">Entrar</button>
        <button id="random-btn" class="btn secondary" style="flex:1">Aleat√≥rio</button>
      </div>
      <div class="small">Seu nick ser√° usado no chat e salvo no dispositivo.</div>
    </div>
  </div>

  <header>
    <div class="topbar">
      <nav class="tabs">
        <a href="#" class="tab active" data-page="home">In√≠cio</a>
        <a href="#" class="tab" data-page="loja">Loja</a>
        <a href="#" class="tab" data-page="vendas">Vendas</a>
        <a href="#" class="tab" data-page="chat">Chat</a>
        <a href="#" class="tab" data-page="videos">V√≠deos & Memes</a>
        <a href="#" class="tab" data-page="market">Marketplace</a>
        <a href="#" class="tab" data-page="music">M√∫sica</a>
      </nav>
      <div class="profile" id="profile">Visitante <span class="logout" id="logout">Sair</span></div>
    </div>
  </header>

  <section class="page active" id="home">
    <div class="hero">
      <div class="hero-inner">
        <h1>ETSTORE</h1>
        <p>Scripts, sistemas e marketplace para FiveM. Visual neon, r√°pido e completo.</p>
        <div class="actions">
          <button class="btn" onclick="activatePage('loja')">Explorar Loja</button>
          <button class="btn secondary" onclick="activatePage('market')">Ir ao Marketplace</button>
        </div>
        <div class="features">
          <div class="feature">
            <h3>Marketplace unificado</h3>
            <p>Casas, Carros e Motos juntos, com VIPs e muito mais.</p>
          </div>
          <div class="feature">
            <h3>V√≠deos & Memes</h3>
            <p>Galeria divertida com clipes e tutoriais.</p>
          </div>
          <div class="feature">
            <h3>M√∫sica</h3>
            <p>Player integrado para animar a navega√ß√£o.</p>
          </div>
          <div class="feature">
            <h3>Cupom din√¢mico</h3>
            <p>Promo√ß√µes que surgem com anima√ß√µes chamativas.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="section-title">Destaques</div>
      <div class="grid" id="home-grid"></div>
    </div>
  </section>

  <main class="container">
    <section class="page" id="loja">
      <div class="section-title">Loja ‚Äî Sistemas e Scripts</div>
      <div class="grid" id="loja-grid"></div>
    </section>

    <section class="page" id="vendas">
      <div class="section-title">Minhas vendas</div>
      <div class="grid" id="vendas-grid"></div>
    </section>

    <section class="page" id="chat">
      <div class="section-title">Chat da comunidade</div>
      <div id="chat-log"></div>
      <div class="chat-row">
        <input id="chat-input" placeholder="Escreva uma mensagem..." />
        <button id="chat-send" class="btn">Enviar</button>
      </div>
    </section>

    <section class="page" id="videos">
      <div class="section-title">V√≠deos & Memes</div>
      <div style="display:grid;grid-template-columns:1fr;gap:16px">
        <video controls width="100%" poster="https://picsum.photos/seed/poster1/800/400">
          <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
          Seu navegador n√£o suporta v√≠deo.
        </video>
        <video controls width="100%" poster="https://picsum.photos/seed/poster2/800/400">
          <source src="https://www.w3schools.com/html/movie.mp4" type="video/mp4">
          Seu navegador n√£o suporta v√≠deo.
        </video>
      </div>
      <div class="grid" id="videos-grid"></div>
    </section>

    <section class="page" id="market">
      <div class="section-title">Marketplace ‚Äî Casas, Carros, Motos e VIPs</div>
      <div class="grid" id="market-grid"></div>
    </section>

    <section class="page" id="music">
      <div class="section-title">M√∫sica ‚Äî Player integrado</div>
      <audio controls style="width:100%">
        <source src="https://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <div style="margin-top:12px" class="grid" id="music-grid"></div>
    </section>
  </main>

  <div class="dock">
    <div class="dock-scroll">
      <div class="dock-item active" data-page="home">üè†</div>
      <div class="dock-item" data-page="loja">üõçÔ∏è</div>
      <div class="dock-item" data-page="vendas">üíº</div>
      <div class="dock-item" data-page="chat">üí¨</div>
      <div class="dock-item" data-page="videos">üé¨</div>
      <div class="dock-item" data-page="market">üöó</div>
      <div class="dock-item" data-page="music">üéµ</div>
    </div>
  </div>

  <div class="coupon" id="coupon">
    <span class="close" id="coupon-close">‚úï</span>
    <h4>NATAL30</h4>
    <p>Use o cupom <span class="code">NATAL30</span> para ganhar 30% de desconto nas suas compras</p>
  </div>

  <div id="product-modal">
    <div class="box">
      <span id="modal-close">‚úï</span>
      <img id="modal-img" src="" alt="" style="width:100%; border-radius:12px; margin-bottom:12px;">
      <h2 id="modal-title"></h2>
      <p id="modal-desc" style="color:#ccc; font-size:14px;"></p>
      <p id="modal-price" style="font-weight:bold; color:#86efac; margin:10px 0;"></p>
      <input id="coupon-input" placeholder="Digite seu cupom" style="width:100%; padding:8px; border-radius:8px; border:1px solid #333; margin-bottom:10px; background:#0b0b20; color:#fff;" />
      <button id="pix-btn" class="btn" style="width:100%">Comprar com Pix</button>
      <div id="pix-info">
        <p>Use a chave Pix abaixo para pagar:</p>
        <p class="code">31 99203-0624</p>
        <img id="pix-qr" src="" alt="QR Pix" style="margin-top:10px;">
        <p id="final-price" style="margin-top:10px; font-weight:bold; color:#86efac;"></p>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Fundo animado
    const canvas = document.getElementById('bg');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
    addEventListener('resize', resize); resize();
    let particles = [];
    function createParticles(n=90) {
      particles = Array.from({ length: n }).map(() => ({
        x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2+0.5,
        dx: (Math.random()-0.5)*0.4, dy: (Math.random()-0.5)*0.4, c: `hsla(${Math.random()*360},70%,70%,0.5)`
      }));
    }
    function animate() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for (const p of particles) {
        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fillStyle = p.c; ctx.fill();
        p.x += p.dx; p.y += p.dy; if (p.x<0||p.x>canvas.width) p.dx*=-1; if (p.y<0||p.y>canvas.height) p.dy*=-1;
      }
      requestAnimationFrame(animate);
    }
    createParticles(); animate();
    const stars = document.getElementById('stars');
    for (let i=0;i<60;i++) {
      const s = document.createElement('div'); s.className = 'star';
      s.style.left = Math.random()*100 + '%'; s.style.top = Math.random()*100 + '%'; s.style.animationDelay = (Math.random()*3)+'s';
      stars.appendChild(s);
    }

    // Login
    const loginScreen = document.getElementById('login');
    const nickInput = document.getElementById('nick-input');
    const loginBtn = document.getElementById('login-btn');
    const randomBtn = document.getElementById('random-btn');
    const profileEl = document.getElementById('profile');
    const logoutEl = document.getElementById('logout');
    let nick = localStorage.getItem('nick');

    function setNick(n) {
      nick = n.trim(); localStorage.setItem('nick', nick);
      profileEl.childNodes[0].textContent = nick + ' '; loginScreen.style.display = 'none'; document.body.style.overflow = 'auto';
    }
    function requireLogin() { document.body.style.overflow = 'hidden'; loginScreen.style.display = 'flex'; }
    if (!nick) { requireLogin(); } else { setNick(nick); }
    loginBtn.addEventListener('click', () => { const v = (nickInput.value || '').trim(); if (!v) { alert('Digite um nickname.'); return; } setNick(v); });
    randomBtn.addEventListener('click', () => { const v = 'Player_' + Math.floor(Math.random()*9999); setNick(v); });
    logoutEl.addEventListener('click', () => { localStorage.removeItem('nick'); requireLogin(); });

    // Dados mock
    const lojaItems = Array.from({ length: 18 }).map((_, i) => ({
      title: ["Painel de Notifica√ß√µes","Recompensa de boas-vindas","Sistema de Lootbox","Fogos de Artif√≠cio","Arena PVP","Sistema VIP","Garage Pro","Banco RP","Jobs Pack","Inventory Neon","HUD Futurista","Crafting Plus","Mapa RP","Anticheat","Casino RP","Pets RP","Roupas Anime","Heist System"][i],
      desc: "Recurso premium com integra√ß√£o f√°cil e suporte completo.",
      price: i % 3 === 0 ? "GR√ÅTIS" : `R$ ${(i + 1) * 9},90`,
      tags: ["FiveM","RP","Top"], img: `https://picsum.photos/seed/loja${i}/600/300`
    }));
    const vendasItems = Array.from({ length: 8 }).map((_, i) => ({ title: `Venda #${1000 + i}`, desc: "Cliente satisfeito, entrega feita.", price: `R$ ${(i + 1) * 49},90`, img: `https://picsum.photos/seed/sale${i}/600/300` }));
    const videosItems = Array.from({ length: 8 }).map((_, i) => ({ title: ["Clip insano","Tutorial HUD","Meme RP","Update Loja"][i % 4], desc: "V√≠deo curto com highlights divertidos.", img: `https://picsum.photos/seed/video${i}/600/300` }));
    const marketItems = [
      { title: "Casa Luxo", type: "Casa", price: "R$ 999,90", img: "https://picsum.photos/seed/casa1/600/300" },
      { title: "Casa Praia", type: "Casa", price: "R$ 799,90", img: "https://picsum.photos/seed/casa2/600/300" },
      { title: "Carro JDM", type: "Carro", price: "R$ 699,90", img: "https://picsum.photos/seed/carro1/600/300" },
      { title: "Carro Muscle", type: "Carro", price: "R$ 749,90", img: "https://picsum.photos/seed/carro2/600/300" },
      { title: "Moto Ninja", type: "Moto", price: "R$ 599,90", img: "https://picsum.photos/seed/moto1/600/300" },
      { title: "Moto Custom", type: "Moto", price: "R$ 549,90", img: "https://picsum.photos/seed/moto2/600/300" },
      { title: "VIP Diamante", type: "VIP", price: "R$ 199,90", img: "https://picsum.photos/seed/vip1/600/300" },
      { title: "VIP Ouro", type: "VIP", price: "R$ 149,90", img: "https://picsum.photos/seed/vip2/600/300" }
    ];
    const musicItems = [
      { title: "Lo-fi Chill", desc: "Trilha suave para navega√ß√£o.", img: "https://picsum.photos/seed/music1/600/300" },
      { title: "Synthwave", desc: "Vibe neon futurista.", img: "https://picsum.photos/seed/music2/600/300" }
    ];

    // Render
    function renderGrid(el, items, options = {}) {
      el.innerHTML = items.map((item) => `
        <div class="card">
          <img class="thumb" src="${item.img}" alt="${item.title}">
          <div class="content">
            <div class="title">${item.title}</div>
            <div class="desc">${item.desc || ""}</div>
            <div class="tags">
              ${(item.tags || [item.type]).filter(Boolean).map(t => `<span class="tag">${t}</span>`).join('')}
            </div>
            <div class="row">
              <div class="price">${item.price || ""}</div>
              <button class="btn" onclick="openProduct('${item.title}','${item.desc}','${item.img}','${item.price}')">
                ${options.cta || "Ver mais"}
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }
    function renderAll() {
      const homeDestaques = lojaItems.slice(0, 6);
      renderGrid(document.getElementById('home-grid'), homeDestaques, { cta: "Abrir" });
      renderGrid(document.getElementById('loja-grid'), lojaItems, { cta: "Adicionar" });
      renderGrid(document.getElementById('vendas-grid'), vendasItems, { cta: "Detalhes" });
      renderGrid(document.getElementById('videos-grid'), videosItems, { cta: "Assistir" });
      renderGrid(document.getElementById('market-grid'), marketItems, { cta: "Comprar" });
      renderGrid(document.getElementById('music-grid'), musicItems, { cta: "Ouvir" });
    }
    renderAll();

    // Navega√ß√£o
    function activatePage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.page === pageId));
      document.querySelectorAll('.dock-item').forEach(d => d.classList.toggle('active', d.dataset.page === pageId));
      scrollTo(0,0);
    }
    document.querySelectorAll('.tab').forEach(tab => tab.addEventListener('click', e => { e.preventDefault(); activatePage(tab.dataset.page); }));
    document.querySelectorAll('.dock-item').forEach(item => { const page = item.dataset.page; if (!page) return; item.addEventListener('click', () => activatePage(page)); });

    // Cupom din√¢mico
    const coupon = document.getElementById('coupon'); const closeBtn = document.getElementById('coupon-close');
    closeBtn.addEventListener('click', () => coupon.className = 'coupon hide');
    function cycleCoupon() { coupon.className = 'coupon show'; setTimeout(() => { coupon.className = 'coupon hide'; }, 6000); }
    setInterval(cycleCoupon, 10000); cycleCoupon();

    // Modal de Produto + Cupom + Pix
    function openProduct(title, desc, img, price) {
      document.getElementById('modal-title').textContent = title;
      document.getElementById('modal-desc').textContent = desc || 'Produto sem descri√ß√£o detalhada.';
      document.getElementById('modal-img').src = img;
      document.getElementById('modal-price').textContent = price || '';
      document.getElementById('product-modal').style.display = 'flex';
      document.getElementById('pix-info').style.display = 'none';
      document.getElementById('coupon-input').value = '';
      document.getElementById('pix-qr').src = '';
      document.getElementById('final-price').textContent = '';
    }
    document.getElementById('modal-close').onclick = () => { document.getElementById('product-modal').style.display = 'none'; };
    document.getElementById('pix-btn').onclick = () => {
      const couponCode = document.getElementById('coupon-input').value.trim().toUpperCase();
      let priceText = document.getElementById('modal-price').textContent.replace("R$","").replace(",",".");
      let price = parseFloat(priceText) || 0;
      if (couponCode === "NATAL30") { price = price * 0.7; alert("Cupom aplicado! 30% de desconto."); }
      const qrData = `Pix: 31 99203-0624 | Produto: ${document.getElementById('modal-title').textContent} | Valor: R$ ${price.toFixed(2)}`;
      const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(qrData)}`;
      document.getElementById('pix-qr').src = qrUrl;
      document.getElementById('final-price').textContent = `Valor final: R$ ${price.toFixed(2)}`;
      document.getElementById('pix-info').style.display = 'block';
    };

    // Firebase: configure seu projeto
    const firebaseConfig = {
      apiKey: "SUA_CHAVE_API",
      authDomain: "SEU_PROJETO.firebaseapp.com",
      databaseURL: "https://SEU_PROJETO-default-rtdb.firebaseio.com",
      projectId: "SEU_PROJETO",
      storageBucket: "SEU_PROJETO.appspot.com",
      messagingSenderId: "ID_MENSAGERIA",
      appId: "SEU_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Chat em tempo real com Firebase
    const chatLog = document.getElementById('chat-log');
    const chatInput = document.getElementById('chat-input');
    const chatSend = document.getElementById('chat-send');

    function renderMessage({ user, text, time }) {
      const d = new Date(time);
      const hh = String(d.getHours()).padStart(2,'0');
      const mm = String(d.getMinutes()).padStart(2,'0');
      const el = document.createElement('div');
      el.innerHTML = `<strong>${user}</strong> <span style="color:#9ca3af;font-size:12px">(${hh}:${mm})</span>: ${text}`;
      chatLog.appendChild(el);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    // Escuta mensagens novas
    db.ref("messages").on("child_added", snapshot => {
      const msg = snapshot.val();
      renderMessage(msg);
    });

    // Envia mensagem
    chatSend.addEventListener('click', () => {
      const v = (chatInput.value || '').trim();
      if (!v) return;
      const msg = { user: nick || 'Visitante', text: v, time: Date.now() };
      db.ref("messages").push(msg);
      chatInput.value = '';
    });
    chatInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') chatSend.click(); });

    // Bloqueios cosm√©ticos
    document.addEventListener('contextmenu', e => { e.preventDefault(); alert("Fun√ß√£o bloqueada!"); });
    document.addEventListener('keydown', e => {
      const key = e.key.toLowerCase();
      if (e.key === "F12" || (e.ctrlKey && e.shiftKey && (key === "i" || key === "j")) || (e.ctrlKey && key === "u") || (e.ctrlKey && key === "s")) {
        e.preventDefault(); alert("A√ß√£o bloqueada!"); window.location.href = "about:blank";
      }
    });
    setInterval(() => {
      if (window.outerWidth - window.innerWidth > 200 || window.outerHeight - window.innerHeight > 200) {
        alert("Voc√™ foi desconectado por tentar inspecionar!"); window.location.href = "about:blank";
      }
    }, 1000);
  </script>
</body>
</html>
